<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    
    <title>Rust 笔记（一）基础 | Catalyst</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    

    

    

    
<link rel="stylesheet" href="/dist/build.css?v=1.5.2.css">


<meta name="generator" content="Hexo 4.2.1"></head>

<body>

  <div class="container">
    <header class="header">
        <div class="header-type">
            
            <div class="avatar avatar-sm">
                <img src="/images/avatar.jpg" alt="Zou">
            </div>
            
            <a href="/">Catalyst</a>
            
        </div>
        <div class="header-menu">
            <div class="header-menu-inner">
                
                <a href="/">主页</a>
                
                <a href="/archives">归档</a>
                
                <a href="/projects">项目</a>
                
                <a href="/about">关于</a>
                
            </div>
            <div class="header-menu-social">
                
    <a class="social" target="_blank" href="https://github.com/owlzou">
        <box-icon type='logo' name='github'></box-icon>
    </a>

            </div>
        </div>

        <div class="header-menu-mobile">
            <div class="header-menu-mobile-inner" id="mobile-menu-open">
                <i class="icon icon-menu"></i>
            </div>
        </div>
    </header>

    <div class="header-menu-mobile-menu">
        <div class="header-menu-mobile-menu-bg"></div>
        <div class="header-menu-mobile-menu-wrap">
            <div class="header-menu-mobile-menu-inner">
                <div class="header-menu-mobile-menu-close" id="mobile-menu-close">
                    <i class="icon icon-cross"></i>
                </div>
                <div class="header-menu-mobile-menu-list">
                    
                    <a href="/">主页</a>
                    
                    <a href="/archives">归档</a>
                    
                    <a href="/projects">项目</a>
                    
                    <a href="/about">关于</a>
                    
                </div>
            </div>
        </div>
    </div>

</div>

  <div class="container">
    <div class="main">
      <section class="inner">
        <section class="inner-main">
          <div class="post">
    <article id="post-ckj6tstuq001u23oi3fnghags" class="article article-type-post" itemscope
    itemprop="blogPost">

    <div class="article-inner">

        
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="/2020/09/25/rust-note-1/" rel="gallery_ckj6tstuq001u23oi3fnghags">
        <img src="./mae-mu-IHFa5s6xaRE-unsplash.webp" itemprop="image">
      </a>
    
  </div>
</div>


        
        <header class="article-header">
            
  
    <h1 class="article-title" itemprop="name">
      Rust 笔记（一）基础
    </h1>
  

        </header>
        

        <div class="article-more-info article-more-info-post hairline">

            <div class="article-date">
  <time datetime="2020-09-25T17:36:45.000Z" itemprop="datePublished">2020-09-25</time>
</div>

            

            
            <div class="article-tag">
                <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Rust/" rel="tag">Rust</a></li></ul>
            </div>
            

            

            <div class="articel-wordcount">
                共&nbsp;<span>1.1k</span>&nbsp;字
            </div>

        </div>

        <div class="article-entry post-inner-html hairline" itemprop="articleBody">
            <p>📔 简约我流语法笔记</p>
<a id="more"></a>

<h2 id="常规"><a href="#常规" class="headerlink" title="常规"></a>常规</h2><ul>
<li>没有 <code>i++</code> 之类。</li>
<li>没有三目运算符。</li>
<li>代码命名规范使用 <code>snake case</code> ，全小写并使用 <code>_</code> 作分隔。</li>
<li>没有用到却要留在代码里的变量加前缀 <code>_</code> ，例： <code>_member</code> 。</li>
</ul>
<h2 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h2><table>
<thead>
<tr>
<th>名称</th>
<th>标志</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>布尔</td>
<td>bool</td>
<td></td>
</tr>
<tr>
<td>字符</td>
<td>char</td>
<td>定义用单引号</td>
</tr>
<tr>
<td>整形</td>
<td>i*（带符号），u*(无符号)</td>
<td>*可以是 8，16，32，64，128，size(依赖于运行程序的电脑架构)</td>
</tr>
<tr>
<td>浮点</td>
<td>f*</td>
<td>*为 32 或 64</td>
</tr>
<tr>
<td>元组</td>
<td>(&lt;类型&gt;,&lt;类型&gt;)</td>
<td>组合不同类型的变量</td>
</tr>
<tr>
<td>数组</td>
<td>[&lt;类型&gt;;&lt;个数&gt;]</td>
<td>可以使用 [&lt;值&gt;;&lt;个数&gt;] 来初始化数组</td>
</tr>
</tbody></table>
<p>关于字符串：通常创建的硬编码字符串属于<code>&amp;str</code>，而创建可变字符串需要使用<code>String</code>。</p>
<pre><code class="rust">let a = &quot;string&quot;;
let b = String::from(&quot;string&quot;);</code></pre>
<h3 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h3><p>元组是将多种类型的多个值组合为一个复合类型的一般方法。它的长度是固定的。</p>
<pre><code class="rust">fn main(){
    let tup:(i32,String) = (12, &quot;abc&quot;);
}</code></pre>
<p>取出元组中的物品需要解构或者用<code>.</code>取值。</p>
<pre><code class="rust">fn main() {
    let tup: (i32, &amp;str) = (12, &quot;abc&quot;);
    let (x, y) = tup;
    let z = tup.0;
    println!(&quot;first value:{} {}&quot;, x, z);
    //first value:12 12
}</code></pre>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>Rust 中的数组是定长的。建立数组可以用通常的方括号法：</p>
<pre><code class="rust">let arr: [i32; 3] = [1,2,3];</code></pre>
<p>或者用同一值初始化:</p>
<pre><code class="rust">let arr = [1;3]; //[1, 1, 1]</code></pre>
<p>用于循环的快速索引：</p>
<pre><code class="rust">for i in 0..4 {
        println!(&quot;{}&quot;, i); //0 1 2 3
    }</code></pre>
<p>数组取值方法：</p>
<pre><code class="rust">fn main() {
   let arr: [i32; 3] = [1,2,3];
   let first = arr[0];
}</code></pre>
<h2 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h2><h3 id="变量和常量"><a href="#变量和常量" class="headerlink" title="变量和常量"></a>变量和常量</h3><p>变量使用 <code>let</code> 定义。默认不可变，如果需要可变则加上<code>mut</code>标志。<br>用<code>let</code>定义同名变量将覆盖原先变量（这和可变变量不一样）。</p>
<pre><code class="rust">let x = 2;
let mut y = 3;

let x = 3; //x最终等于3,let不能丢
y = 5;</code></pre>
<p>常量使用<code>const</code>定义，并<strong>必须声明类型</strong>。常量一定是不可变的，所以不用<code>mut</code>。</p>
<pre><code class="rust">const c:u32 = 99</code></pre>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>函数用<code>fn</code>关键字定义。</p>
<pre><code class="rust">fn main(){
    let result = add(1,3);
    println!(&quot;value:{}&quot;,result);
}

fn add(a:i64,b:i64) -&gt; i64{
    a+b
}</code></pre>
<p>函数的返回值与大括号内最后的表达式同值。注意，表达式最后不带<strong>分号</strong>，带分号的属于声明（statement)。</p>
<p>借用使用<code>&amp;&lt;变量&gt;</code>。可变借用使用<code>&amp;mut &lt;变量&gt;</code>。<strong>同时使用</strong>的借用变量只能有一个可变借用或者多个不变借用。</p>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p>单行注释 <code>//</code>，多行注释 <code>/**/</code>。</p>
<h2 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h2><h3 id="条件"><a href="#条件" class="headerlink" title="条件"></a>条件</h3><p>使用 <code>if &lt;exp&gt; {&lt;then&gt;} else if &lt;exp&gt; {&lt;then&gt;} else {&lt;then&gt;}</code>。</p>
<p>Rust 在碰到第一个满足条件的块就执行并返回，不检查后面的内容。</p>
<h3 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h3><p>三种循环方法：<code>loop</code>、<code>while</code>和<code>for</code>。</p>
<pre><code class="rust">fn main(){
    let lo = loop {
      println!(&quot;loop!&quot;);
      break &quot;loop&quot;; //通过break终止循环并返回 &quot;loop&quot;
    };
    println!(&quot;loop:{}&quot;,lo);

    let mut n = 3;
    while n &gt; 0 {
      println!(&quot;while:{}&quot;,n);
      n -= 1;
    }

    let list = [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;];

    for i in list.iter(){ //iter()
        println!(&quot;for:{}&quot;,i);
    }

    for i in 1..6 {
        println!(&quot;for:{}&quot;,i); //打印出的是1-5
    }

}</code></pre>
<h2 id="分割"><a href="#分割" class="headerlink" title="分割"></a>分割</h2><p>数组和字符串的分割都是其一部分的引用，示例如下：</p>
<pre><code class="rust">//数组
let a = [1, 2, 3, 4, 5];
let slice = &amp;a[1..4]; //[2, 3, 4]

//字符串
let s = String::from(&quot;hello&quot;);
let he = &amp;s[0..2];</code></pre>
<p>切片的数字是从 <code>开始</code> 到 <code>结束+1</code> 。如果是从第一个索引开始，0 可以省略(<code>[..2]</code>)。</p>
<h2 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h2><pre><code class="rust">struct Person{
    name:String,
    age: u64,
}

struct Member{
    id: u64,
    ..Person //使用person内的定义
}

struct Point(i32,i32) //元组结构</code></pre>
<p>初始化</p>
<pre><code class="rust">let p = Person {
        name: String::from(&quot;Robert&quot;),
        age: 8,
    };

let pt = Point(33,33);

//如果需要一个新结构体和现存的某个结构体一样，但修改部分数据

let p1 = Person {
    name: String::from(&quot;Alice&quot;),
    ..p
};</code></pre>
<p>定义用于结构体的方法：往往在定义结构体的上下文，用<code>self</code>指代结构体。</p>
<pre><code class="rust">fn main(){
    struct Point(i32,i32);

    impl Point{
        fn print(&amp;self){
            let Point(x,y) = self;
            println!(&quot;(x:{},y:{})&quot;,x,y)
        }
    }

    let pt = Point(33,33);
    pt.print();
}</code></pre>
<p><code>impl</code>代表 implementations ， 用于定义类型的实现。</p>
<h2 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h2><p>字符串<a href="https://doc.rust-lang.org/book/ch04-03-slices.html" target="_blank" rel="noopener">切片</a>：对于字符串位置的引用（所以没有对应的所有权概念）</p>
<pre><code class="rust">let str = String::from(&quot;Hello&quot;);
let he = &amp;str[0..2];
println!(&quot;{}&quot;,he);//He
//or
let he = &amp;str[..2]; //开始为0可以屏蔽
println!(&quot;{}&quot;,he);//He
let lo = &amp;str[3..]; //结尾为最后也可以屏蔽
println!(&quot;{}&quot;,lo);//lo</code></pre>
<p><strong>参考资料</strong></p>
<ul>
<li>主要是<a href="https://doc.rust-lang.org/book/title-page.html" target="_blank" rel="noopener">《The Book》</a>的读书笔记。</li>
<li><a href="https://github.com/rust-lang/rustlings" target="_blank" rel="noopener">Rustlings</a> 的做题感想</li>
<li>封面图片：<span>Photo by <a href="https://unsplash.com/@picoftasty?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target="_blank" rel="noopener">Mae Mu</a> on <a href="https://unsplash.com/s/photos/crab?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target="_blank" rel="noopener">Unsplash</a></span></li>
</ul>

        </div>

    </div>

    

    

    

    

    

    
<nav class="article-nav">
  
    <a href="/2020/10/03/rust-note-2/" id="article-nav-newer" class="article-nav-link-wrap">
      <div class="article-nav-caption">下一篇</div>
      <div class="article-nav-title">
        
          Rust 笔记（二）其它类型
        
      </div>
    </a>
  
  
    <a href="/2020/09/17/elm-note-parser/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-caption">上一篇</div>
      <div class="article-nav-title">将 HEX 颜色值转换为 RGB 颜色值</div>
    </a>
  
</nav>


</article>



<!-- utteranc comments -->

<section class="comments">
    <script src="https://utteranc.es/client.js"
            repo='owlzou/owlzou.github.io'
            issue-term='pathname'
            theme='github-light'
            crossorigin='anonymous'
            async>
    </script>
</section>



</div>
        </section>
      </section>
      <aside class="sidebar">
          <div class="widget">
     
  <div class="widget-wrap">
    <div class="widget-inner">
      <div class="toc post-toc-html"></div>
    </div>
  </div>
  
  <div class="widget-wrap widget-cate">
    <div class="widget-title"><span>Categories</span></div>
    <div class="widget-inner">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web%E5%89%8D%E7%AB%AF/">Web前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%97%A5%E5%BF%97/">日志</a></li></ul>
    </div>
  </div>

  
  <div class="widget-wrap widget-tags">
    <div class="widget-title"><span>Tags</span></div>
    <div class="widget-inner">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elm/" rel="tag">Elm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/F/" rel="tag">F#</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Fabulous/" rel="tag">Fabulous</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Rust/" rel="tag">Rust</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Three-js/" rel="tag">Three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebGL/" rel="tag">WebGL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%98%E8%85%BE/" rel="tag">折腾</a></li></ul>
    </div>
  </div>

  
  <div class="widget-wrap widget-recent-posts">
    <div class="widget-title"><span>Recent Posts</span></div>
    <div class="widget-inner">
      <ul>
        
          <li>
            <a href="/2020/11/09/bitwise/">位运算笔记</a>
          </li>
        
          <li>
            <a href="/2020/10/12/n-image-viewer/">翻出了 2018 年写的图片浏览器</a>
          </li>
        
          <li>
            <a href="/2020/10/09/rust-note-4-box/">Rust 笔记（四）智能指针等</a>
          </li>
        
          <li>
            <a href="/2020/10/05/rust-note-3-module-and-test/">Rust 笔记（三）模块和测试</a>
          </li>
        
          <li>
            <a href="/2020/10/03/rust-note-2/">Rust 笔记（二）其它类型</a>
          </li>
        
      </ul>
    </div>
  </div>
  
  <div class="widget-wrap widget-archive">
    <div class="widget-title"><span>Archive</span></div>
    <div class="widget-inner">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019</a></li></ul>
    </div>
  </div>

 
</div>
<div id="backtop">
    <i class="icon icon-arrow-up"></i>
</div>
    
      </aside>
    </div>
  </div>

  <footer class="footer">
    <div class="footer-inner">
        <div class="footer-info">
            <span>&copy; 2019 - 2020 Catalyst @ Zou</span>
        </div>
        <div class="footer-powered">
            <a href="https://github.com/lh1me/hexo-theme-aomori" target="_blank">Aomori</a> Theme · Powered By Hexo
        </div>
    </div>
</footer>



<script src="/dist/build.js?1.5.2.js"></script>


<script src="/dist/custom.js?1.5.2.js"></script>







</body>
</html>